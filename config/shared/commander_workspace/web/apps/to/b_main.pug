extends ../../common/layout

block header
        i.fa-fw.fa.fa-signal
        | Telemetry Output

block main
  -var MFLOW_COUNT = 50
  -var PQUEUE_COUNT = 10
  .row
    article.col-xs-12.col-sm-12.col-md-6.col-lg-4
        #wid-TO-CmdAndData.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
          header
            span.widget-icon
              i.fa.fa-table
            h2 General
          div
            .jarviswidget-editbox
              input.form-control(type='text')
            .widget-body
              .table-responsive
                table.table.table-condensed
                  tbody
                    tr
                      th Cmd Count
                      td 
                        span(data-sage={tlm: [{name:'/CFS/TO/CmdCounter'}]}) ---
                    tr
                      th Cmd Error Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/ErrCounter'}]}) ---
                    tr
                      th Total Messages Dropped
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/TotalMsgsDropped'}]}) ---
                    tr
                      th Memory In Use
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/MemInUse'}]}) ---
                    tr
                      th Peak Memory In Use
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/PeakMemInUse'}]}) ---
                    tr
                      th Max Allocatable Memory
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/MaxMem'}]}) ---
                    tr
                      th Output Queue 0 Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/OutChannel0Queud'}]}) ---
                    tr
                      th Output Queue 1 Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/OutChannel1Queud'}]}) ---
                    tr
                      th Output Queue 2 Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/OutChannel2Queud'}]}) ---
                    tr
                      th Output Queue 3 Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/OutChannel3Queud'}]}) ---
                    tr
                      th Output Queue 4 Count
                      td
                        span(data-sage={tlm: [{name:'/CFS/TO/OutChannel4Queud'}]}) ---
              footer
                .btn-group.btn-group-sm.btn-space
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/NoOp'}}) No-Op
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/Reset'}}) Reset Counters
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/EnableChannel'}}) Enable Channel
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/DisableChannel'}}) Disable Channel
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/AddMessage'}}) Add Message
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/RemoveMessage'}}) Remove Message
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/QueryMessageFlow'}}) Query Message Flow
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/QueryPriorityQueue'}}) Query Priority Queue
                  button.btn.btn-primary(data-sage={cmd: {name:'/CFS/TO/QueryOutputQueue'}}) Query Output Queue
                  
                  
    article.col-xs-12.col-sm-12.col-md-6.col-lg-4
        #wid-TO-Channels.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
          header
            span.widget-icon
              i.fa.fa-table
            h2 Tables
          div
            .jarviswidget-editbox
              input.form-control(type='text')
            .widget-body
              .table-responsive
                table.table.table-condensed
                  tbody                  
                    tr
                      th(style='width:150px') Ground Config
                      td
                        .btn-group
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Load'}}) Load
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Dump', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) Dump
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Validate', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) Val
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Activate', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) Act
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/TlmReg', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) TlmReg
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/DeleteCDS', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) DelCDS  
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/AbortLoad', argument:[{name:'TableName', value:'TO.GROUND_CFG'}]}}) Abort                  
                    tr
                      th(style='width:150px') Ground Dump
                      td
                        .btn-group
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Dump', argument:[{name:'TableName', value:'TO.GROUND_DMP'}]}}) Dump
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/TlmReg', argument:[{name:'TableName', value:'TO.GROUND_DMP'}]}}) TlmReg             
                    tr
                      th Onboard Config
                      td
                        .btn-group
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Load'}}) Load
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Dump', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) Dump
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Validate', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) Val
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Activate', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) Act
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/TlmReg', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) TlmReg
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/DeleteCDS', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) DelCDS  
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/AbortLoad', argument:[{name:'TableName', value:'TO.ONBOARD_CFG'}]}}) Abort 
                          tr
                      th Onboard Dump
                      td
                        .btn-group
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/Dump', argument:[{name:'TableName', value:'TO.ONBOARD_DMP'}]}}) Dump
                          button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(data-sage={cmd: {name: '/CFS/CFE_TBL/TlmReg', argument:[{name:'TableName', value:'TO.ONBOARD_DMP'}]}}) TlmReg
  .row
    article.col-xs-12.col-sm-12.col-md-8.col-lg-7(style='width:750px')
      #wid-TO-Diag.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Diagnostic
            button.btn.btn-xs.btn-primary.btn-labeled(data-sage={cmd:{name:'/CFS/TO/SendDiag'}}) Send
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed
                tbody
                  tr  
                    th Channel Index
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/ChannelIndex'}]}) --- 
                  tr  
                    th Config Table Name
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/ConfigTableName'}]}) --- 
                  tr  
                    th Config Table File Name
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/ConfigTableFileName'}]}) ---   
                  tr  
                    th Dump Table Name
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/DumpTableName'}]}) ---   
                  tr  
                    th Channel Name
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/ChannelName'}]}) ---   
                  tr  
                    th Table ID
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/TableID'}]}) ---      
            .table-responsive
              table.table.table-striped.table-condensed.table-memory
                thead
                  th(style='width:50px') Message Flow
                  th(style='width:200px') Msg ID
                  th(style='width:75px') Msg Limit
                  th(style='width:75px') PQ ID
                  th(style='width:75px') Dropped Msgs
                  th(style='width:75px') Queued Msgs
                tbody
                  - for (var i = 0; i < MFLOW_COUNT; ++i) {
                    tr
                      th= i
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/MF'+i+'_MsgId'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/MF'+i+'_MsgLimit'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/MF'+i+'_PqueueID'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/MF'+i+'_DroppedMsgCnt'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/MF'+i+'_QueuedMsgCnt'}]}) ---   
                  - } 
            .table-responsive
              table.table.table-striped.table-condensed.table-memory
                thead
                  th(style='width:50px') Priority Queue
                  th(style='width:100px') State
                  th(style='width:75px') Msg Limit
                  th(style='width:75px') Type
                  th(style='width:75px') Dropped
                  th(style='width:75px') Total Queued
                  th(style='width:75px') Current Queued
                  th(style='width:75px') Highwater
                tbody
                  - for (var i = 0; i < PQUEUE_COUNT; ++i) {
                    tr
                      th= i
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_State'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_MsgLimit'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_Qtype'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_DroppedMsgCnt'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_QueuedMsgCnt'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_CurrentlyQueuedCnt'}]}) ---
                      td
                        span(data-sage={tlm:[{name:'/CFS/TO/PQ'+i+'_HighwaterMark'}]}) --- 
                  - } 
            .table-responsive
              table.table.table-condensed
                tbody
                  tr  
                    th Output Sent
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/Out_SentCount'}]}) --- 
                  tr  
                    th Output Currently Queued
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/Out_CurrentlyQueuedCnt'}]}) ---   
                  tr  
                    th Output Highwater
                    td 
                      span(data-sage={tlm:[{name:'/CFS/TO/Out_HighwaterMark'}]}) ---  

  .row
    article.col-xs-11.col-sm-6.col-md-5.col-lg-4(style='width:350px')
      #wid-TO-Memory.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Memory
            button.btn.btn-xs.btn-primary.btn-labeled.sage-cmd-inline(onclick='SendMemoryPoolStats()') Send
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed
                tbody
                  tr  
                    th Pool Handle
                    td 
                      span#TO_MemPoolHandle(data-sage={tlm:[{name:'/CFS/TO/MemPoolHandle', format:'0x%08x'}]} onchange='UpdatePoolHandleColors();') ---                    
                  tr
                    th Pool handle
                    td 
                      span#CFE_ES_PoolStats_Handle(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Handle', format:'0x%08x'}]} onchange='UpdatePoolHandleColors();') ---
                  tr
                    th Pool size
                    td 
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Size'}]}) ---
                  tr
                    th Num blocks requested
                    td 
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_NumBlocksRequested'}]}) ---
                  tr
                    th Check error count
                    td 
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_CheckErrCtr'}]}) ---
                  tr
                    th Num free bytes
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_NumFreeBytes'}]}) ---           
            .table-responsive
              table.table.table-striped.table-condensed.table-memory
                thead
                  th(style='width:50px') #
                  th(style='width:100px') Block Size
                  th(style='width:75px') Created
                  th(style='width:75px') Free
                tbody
                  tr
                    th 0
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block0_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block0_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block0_NumFree'}]}) ---
                  tr
                    th 1
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block1_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block1_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block1_NumFree'}]}) ---
                  tr
                    th 2
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block2_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block2_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block2_NumFree'}]}) ---
                  tr
                    th 3
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block3_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block3_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block3_NumFree'}]}) ---
                  tr
                    th 4
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block4_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block4_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block4_NumFree'}]}) ---
                  tr
                    th 5
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block5_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block5_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block5_NumFree'}]}) ---
                  tr
                    th 6
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block6_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block6_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block6_NumFree'}]}) ---
                  tr
                    th 7
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block7_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block7_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block7_NumFree'}]}) ---
                  tr
                    th 8
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block8_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block8_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block8_NumFree'}]}) ---
                  tr
                    th 9
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block9_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block9_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block9_NumFree'}]}) ---
                  tr
                    th 10
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block10_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block10_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block10_NumFree'}]}) ---
                  tr
                    th 11
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block11_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block11_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block11_NumFree'}]}) ---
                  tr
                    th 12
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block12_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block12_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block12_NumFree'}]}) ---
                  tr
                    th 13
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block13_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block13_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block13_NumFree'}]}) ---
                  tr
                    th 14
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block14_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block14_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block14_NumFree'}]}) ---
                  tr
                    th 15
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block15_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block15_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block15_NumFree'}]}) ---
                  tr
                    th 16
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block16_Size'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block16_NumCreated'}]}) ---
                    td
                      span(data-sage={tlm:[{name:'/CFS/CFE_ES/PoolStats_Block16_NumFree'}]}) ---
                
    article.col-xs-12.col-sm-12.col-md-6.col-lg-3(style={width:'500px'})
      #wid-CFE-ES-AppCtrl-ApplicationControl.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Application Control
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed.table-app-status
                tbody
                  tr
                    th App Name
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_Name'}]}) ---
                  tr
                    th ID
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_AppID'}]}) ---
                  tr
                    th Type
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_Type'}]}) ---
                  tr
                    th Entry Point
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_EntryPoint'}]}) ---
                  tr
                    th File Name
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_FileName'}]}) ---
                  tr 
                    th Stack Size
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_StackSize'}]}) ---
                  tr
                    th Module ID
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_ModuleID'}]}) ---
                  tr
                    th Addr valid
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_AddressesAreValid'}]}) ---
                  tr 
                    th Code addr
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_CodeAddress', format:'0x%08x'}]}) ---
                  tr
                    th Code size
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_CodeSize'}]}) ---
                  tr
                    th Data Addr
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_DataAddress', format:'0x%08x'}]}) ---
                  tr
                    th Data Size
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_DataSize'}]}) ---
                  tr
                    th BSS Addr
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_BSSAddress', format:'0x%08x'}]}) ---
                  tr
                    th BSS Size
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_BSSSize'}]}) ---
                  tr
                    th Start Addr
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_StartAddress', format:'0x%08x'}]}) ---
                  tr 
                    th Exception Action
                    td              
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_ExceptionAction'}]}) ---
                  tr
                    th Priority
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_Priority'}]}) ---
                  tr
                    th Main Task ID
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_MainTaskId'}]}) ---
                  tr
                    th Execution Counter
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_ExecutionCounter'}]}) ---
                  tr 
                    th Main Task Name
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_MainTaskName'}]}) ---
                  tr
                    th Child Task Count
                    td
                     span(data-sage={tlm: [{name: '/CFS/CFE_ES/AppInfo_NumOfChildTasks'}]}) ---
            .btn-group.dropup(style='margin-top: 10px;')
              button.btn.btn-primary(data-sage={cmd: {name: '/CFS/CFE_ES/QueryOne', argument:[{name:'Name', value:'TO'}]}}) Query
              button.btn.btn-primary(data-sage={cmd: {name: '/CFS/CFE_ES/StartApp', argument:[{name:'Name', value:'TO'},{name:'EntryPoint', value:'TO_AppMain'},{name:'FileName', value:'/cf/apps/TO.so'},{name:'StackSize', value:'32768'},{name:'ExceptionAction', value:'APP RESTART'},{name:'Priority', value:'80'}]}}) Start
              button.btn.btn-primary(data-sage={cmd: {name: '/CFS/CFE_ES/StopApp', argument:[{name:'Name', value:'TO'}]}}) Stop
              button.btn.btn-primary(data-sage={cmd: {name: '/CFS/CFE_ES/RestartApp', argument:[{name:'Name', value:'TO'}]}}) Restart
              button.btn.btn-primary(data-sage={cmd: {name: '/CFS/CFE_ES/ReloadApp', argument:[{name:'Name', value:'TO'},{name:'FileName', value:'/cf/apps/TO.so'}]}}) Reload
  .row
    - 
      var schDef = {
        slotCount:200,
        entriesPerSlot:5,
        appName:'TO',
        slots:[
          {id:1, activities:[1]},
          {id:21, activities:[1]},
          {id:41, activities:[1]},
          {id:61, activities:[1]},
          {id:80, activities:[1]},
          {id:81, activities:[1]},
          {id:101, activities:[1]},
          {id:121, activities:[1]},
          {id:141, activities:[1]},
          {id:161, activities:[1]},
          {id:181, activities:[1]}],
        groups:[
          {name:'SCH_GROUP_TO', id:0x01000000}]};

    article.col-xs-12.col-sm-12.col-md-12.col-lg-8
      #wid-SCH-Diag-Entries.jarviswidget.jarviswidget-color-blueDark(style='width: 860px' data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Scheduler 
            button.btn.btn-xs.btn-primary.btn-labeled(data-sage={cmd:{name:'/CFS/SCH/SendDiagTlm'}}) Send Schedule
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed
                tbody
                  tr
                    th(style='width: 150px') Cmd Count
                    td
                      span(data-sage={tlm: [{name:'/CFS/SCH/CmdCounter'}]}) ---
                  tr
                    th Error Count
                    td
                      span(data-sage={tlm: [{name:'/CFS/SCH/ErrCounter'}]}) ---
            .table-responsive
              table.table.table-bordered.table-condensed
                thead
                  tr
                    th(style="width: 100px") Slot #
                    th(style="width: 100px") Activity #
                    th(style="width: 150px") State
                    th MsgID
                    th(style="width: 150px") Action
                tbody
                  - for (var slotIdx = 0; slotIdx < schDef.slots.length; ++slotIdx) {
                    - var slotID = schDef.slots[slotIdx].id;
                    - var strSlotID = '' + slotID;
                    - for (var actIdx = 0; actIdx < schDef.slots[slotIdx].activities.length; ++actIdx){
                      - var actID = schDef.slots[slotIdx].activities[actIdx];
                      - var strActID =  '' + actID;
                      - var entryID = (schDef.entriesPerSlot * slotID) + actID;
                      - var strEntryID = '' + entryID;
                      - var tlmEntryState = {tlm:[{name:'/CFS/SCH/EntryState_'+entryID}]};
                      - var tlmMsgID = {tlm:[{name:'/CFS/SCH/MsgID_'+entryID}]};
                      - var cmdEnableEntry = {cmd: {name:'/CFS/SCH/EnableEntry', argument:[{name:'Slot', value:strSlotID},{name:'Entry', value:strActID}]}};
                      - var cmdDisableEntry = {cmd: {name:'/CFS/SCH/DisableEntry', argument:[{name:'Slot', value:strSlotID},{name:'Entry', value:strActID}]}};
                      tr
                        td #{slotID}
                        td #{strActID}
                        td 
                          span(data-sage= tlmEntryState) ---
                        td
                          span(data-sage= tlmMsgID) ---
                        td
                          .btn-group.dropup
                            button.btn.btn-xs.btn-primary.btn-labeled(data-sage= cmdEnableEntry) Ena
                            button.btn.btn-xs.btn-primary.btn-labeled(data-sage= cmdDisableEntry) Dis
                    - };
                  - };
            .table-responsive
              table.table.table-bordered.table-condensed
                thead
                  tr
                    th(style="width: 100px") Group Name
                    th(style="width: 100px") Group ID
                    th(style="width: 150px") Action
                tbody
                  - for (var grpIdx = 0; grpIdx < schDef.groups.length; ++grpIdx) {
                    - var grpName = schDef.groups[grpIdx].name;
                    - var grpID = schDef.groups[grpIdx].id;
                    - var strGrpID = '0x' + grpID.toString(16);
                    - var cmdEnableGroup = {cmd: {name:'/CFS/SCH/EnableGroup', argument:[{name:'Group', value:strGrpID}]}};
                    - var cmdDisableGroup = {cmd: {name:'/CFS/SCH/DisableGroup', argument:[{name:'Group', value:strGrpID}]}};
                    tr
                      td #{grpName}
                      td(style='font-family: monospace') #{strGrpID}
                      td
                        .btn-group.dropup
                          button.btn.btn-xs.btn-primary.btn-labeled(data-sage= cmdEnableGroup) Ena
                          button.btn.btn-xs.btn-primary.btn-labeled(data-sage= cmdDisableGroup) Dis
                  - };

  .row
    article.col-xs-12.col-sm-12.col-md-10.col-lg-6(style={width:'500px'})               
      #wid-TO-Events.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Event Filter
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed
                tbody
                  tr
                    th(style={width:'250px'}) CFE EVS Cmd Count
                    td(style={width:'150px'})
                      span(data-sage={tlm: [{name: '/CFS/CFE_EVS/CmdCounter'}]}) ---
                  tr
                    th CFE EVS Cmd Err Count
                    td
                      span(data-sage={tlm: [{name: '/CFS/CFE_EVS/ErrCounter'}]}) ---
                  tr
                    th App Events
                    td 
                      .btn-group
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/EnableAppEvents', argument:[{name:'AppName', value:'TO'}]}}) Enable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/DisableAppEvents', argument:[{name:'AppName', value:'TO'}]}}) Disable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/ResetAllFilters', argument:[{name:'AppName', value:'TO'}]}}) Reset
                  tr
                    th Event Types
                    td
                  tr
                    td(style='padding-left: 20px !important') Critical
                    td
                      .btn-group
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/EnableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Set'},{name:'Debug', value:'Ignored'},{name:'Spare', value:'0'}]}}) Enable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/DisableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Set'},{name:'Debug', value:'Ignored'},{name:'Spare', value:'0'}]}}) Disable
                  tr
                    td(style='padding-left: 20px !important')  Error
                    td
                      .btn-group
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/EnableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Set'},{name:'Information', value:'Ignored'},{name:'Debug', value:'Ignored'},{name:'Spare', value:'0'}]}}) Enable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/DisableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Set'},{name:'Information', value:'Ignored'},{name:'Debug', value:'Ignored'},{name:'Spare', value:'0'}]}}) Disable
                  tr
                    td(style='padding-left: 20px !important')  Info
                    td
                      .btn-group
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/EnableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Set'},{name:'Error', value:'Ignored'},{name:'Spare', value:'0'}]}}) Enable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/DisableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Set'},{name:'Debug', value:'Ignored'},{name:'Spare', value:'0'}]}}) Disable
                  tr
                    td(style='padding-left: 20px !important')  Debug
                    td
                      .btn-group
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/EnableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Ignored'},{name:'Debug', value:'Set'},{name:'Spare', value:'0'}]}}) Enable
                        button.btn.btn-xs.btn-primary(data-sage={cmd: {name:'/CFS/CFE_EVS/DisableAppEventType', argument:[{name:'AppName', value:'TO'},{name:'Critical', value:'Ignored'},{name:'Error', value:'Ignored'},{name:'Information', value:'Ignored'},{name:'Debug', value:'Set'},{name:'Spare', value:'0'}]}}) Disable
                  tr
                    th Event IDs
                    td
                  - 
                    var eventDef = {
                      appName:'TO',
                      events:[
                        {name:'TO_INIT_INF_EID', eventID:1},
                        {name:'TO_CONFIG_TABLE_INF_EID', eventID:2},
                        {name:'TO_CDS_INF_EID', eventID:3},
                        {name:'TO_CMD_INF_EID', eventID:4},
                        {name:'TO_ERR_EID', eventID:5},
                        {name:'TO_INIT_ERR_EID', eventID:6},
                        {name:'TO_CONFIG_TABLE_ERR_EID', eventID:7},
                        {name:'TO_CDS_ERR_EID', eventID:8},
                        {name:'TO_CMD_ERR_EID', eventID:9},
                        {name:'TO_PIPE_ERR_EID', eventID:10},
                        {name:'TO_MSGID_ERR_EID', eventID:11},
                        {name:'TO_MSGLEN_ERR_EID', eventID:12},
                        {name:'TO_MSG_WRITE_ERR_EID', eventID:13},
                        {name:'TO_MSG_UNSUB_DBG_EID', eventID:14},
                        {name:'TO_MSG_DROP_FROM_FLOW_DBG_EID', eventID:15},
                        {name:'TO_CR_POOL_ERR_EID', eventID:16},
                        {name:'TO_GET_POOL_ERR_EID', eventID:17},
                        {name:'TO_TLM_LISTEN_ERR_EID', eventID:18},
                        {name:'TO_MSG_FLOW_INFO_EID', eventID:19},
                        {name:'TO_PQUEUE_INFO_EID', eventID:20},
                        {name:'TO_OUT_CH_INFO_EID', eventID:21},
                        {name:'TO_CMD_NOOP_EID', eventID:22},
                        {name:'TO_CMD_RESET_EID', eventID:23},
                        {name:'TO_CMD_ADD_MSG_FLOW_EID', eventID:24},
                        {name:'TO_CMD_REMOVE_MSG_FLOW_EID', eventID:25}]
                      }; 

                  - for (var idx = 0; idx < eventDef.events.length; ++idx) {
                      - var strEventID = '' + eventDef.events[idx].eventID;
                      - var cmdSetFilter = {cmd: {name:'/CFS/CFE_EVS/SetFilter', argument:[{name:'AppName', value:eventDef.appName},{name:'EventID', value:strEventID}]}};
                      - var cmdResetFilter = {cmd: {name:'/CFS/CFE_EVS/ResetFilter', argument:[{name:'AppName', value:eventDef.appName},{name:'EventID', value:strEventID}]}};
                      - var cmdAddEventFilter = {cmd: {name:'/CFS/CFE_EVS/AddEventFilter', argument:[{name:'AppName', value:eventDef.appName},{name:'EventID', value:strEventID}]}};
                      - var cmdDeleteEventFilter = {cmd: {name:'/CFS/CFE_EVS/DeleteEventFilter', argument:[{name:'AppName', value:eventDef.appName},{name:'EventID', value:strEventID}]}};
                      tr
                        td(style='padding-left: 20px !important')  #{eventDef.events[idx].name}
                        td
                          .btn-group
                            button.btn.btn-xs.btn-primary(data-sage= cmdSetFilter) Set
                            button.btn.btn-xs.btn-primary(data-sage= cmdResetFilter) Reset
                            button.btn.btn-xs.btn-primary(data-sage= cmdAddEventFilter) Add
                            button.btn.btn-xs.btn-primary(data-sage= cmdDeleteEventFilter) Delete
                  - };


block scripts
  script.
      
      Handlebars.registerHelper('toHex16', function(context) {
        return sprintf("0x%04x", context);
      }); 
      
      function UpdatePoolHandleColors() {
        if($('#/CFS/TO/MemPoolHandle').text() === $('#CFE_ES_PoolStats_Handle').text())
        {
            $('#/CFS/TO/MemPoolHandle').css({'color':'green'});
            $('#CFE_ES_PoolStats_Handle').css({'color':'green'}); 
        }
        else
        {
            $('#/CFS/TO/MemPoolHandle').css({'color':'red'});
            $('#CFE_ES_PoolStats_Handle').css({'color':'red'}); 
        }
      }
      
    var SendMemoryPoolStats = function() {        
      session.sendCommand('/CFS/CFE_ES/TlmPoolStats', [
        {name:'Application', value:'TO'},
        {name:'PoolHandle', value:parseInt($('#TO_MemPoolHandle').text()).toString()}
      ]);
    }
      